<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Moip by SOSTheBlack</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Moip</h1>
          <h2>This is a package of a payment intermediary called MOIP</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/SOSTheBlack/moip/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/SOSTheBlack/moip/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/SOSTheBlack/moip" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="moip-laravel-package" class="anchor" href="#moip-laravel-package" aria-hidden="true"><span class="octicon octicon-link"></span></a>MoIP (Laravel Package)</h1>

<hr>

<p><a href="https://packagist.org/packages/sostheblack/moip"><img src="https://poser.pugx.org/sostheblack/moip/v/stable.svg" alt="Latest Stable Version"></a> <a href="https://packagist.org/packages/sostheblack/moip"><img src="https://poser.pugx.org/sostheblack/moip/downloads.svg" alt="Total Downloads"></a> <a href="https://packagist.org/packages/sostheblack/moip"><img src="https://poser.pugx.org/sostheblack/moip/v/unstable.svg" alt="Latest Unstable Version"></a> <a href="https://packagist.org/packages/sostheblack/moip"><img src="https://poser.pugx.org/sostheblack/moip/license.svg" alt="License"></a></p>

<p>Integrates via API, your e-commerce with MoIP quickly and easily</p>

<ul>
<li><code>Moip::sendMoip($data);</code></li>
<li>
<code>Moip::response</code>;</li>
</ul>

<p>and response</p>

<ul>
<li><code>$moip-&gt;error</code></li>
<li><code>$moip-&gt;response</code></li>
<li><code>$moip-&gt;token</code></li>
<li><code>$moip-&gt;payment_url</code></li>
<li><code>$moip-&gt;xmlSend</code></li>
<li><code>$moip-&gt;xmlGet</code></li>
<li><code>Moip::response()</code></li>
</ul>

<p><img src="http://www.tickimg.com.br/uploads/_captura_de_tela_de.png" alt="Moip"></p>

<h2>
<a id="instalation" class="anchor" href="#instalation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Instalation</h2>

<h3>
<a id="laravel-42-and-blow" class="anchor" href="#laravel-42-and-blow" aria-hidden="true"><span class="octicon octicon-link"></span></a>Laravel 4.2 and Blow</h3>

<p>Begin by installing this package through Composer. Edit your project's <code>composer.json</code> file to require <code>sostheblack/moip</code>.</p>

<p>soon in version v1.*</p>

<pre><code>"require-dev": {
    "sostheblack/moip": "1.*"
}
</code></pre>

<p>Next, update Composer from the Terminal:</p>

<p><code>$ composer update</code></p>

<p>Once that's been completed, the next step operation is to copy the file that is in moip.php <code>vendor/sostheblack/src/config/moip.php</code> and Paste in <code>app/config</code></p>

<p>Make the necessary settings and proceed to the next step</p>

<p>Once this operation completes, the final step is to add the service provider and facade. Open <code>app/config/app.php</code>.</p>

<p>Add a new item to the providers array.</p>

<pre><code>'providers' =&gt; array(
    'Illuminate\Foundation\Providers\ArtisanServiceProvider',
    'Illuminate\Auth\AuthServiceProvider',
    ...
    'SOSTheBlack\Moip\ServiceProvider',
),
</code></pre>

<p>Add a new item to the facades array.</p>

<pre><code>'aliases' =&gt; array(
    'App'        =&gt; 'Illuminate\Support\Facades\App',
    'Artisan'    =&gt; 'Illuminate\Support\Facades\Artisan',
    ...
    'Moip'       =&gt; 'SOSTheBlack\Moip\Facade',
),
</code></pre>

<h3>
<a id="laravel-5-and-abouve" class="anchor" href="#laravel-5-and-abouve" aria-hidden="true"><span class="octicon octicon-link"></span></a>Laravel 5 and Abouve</h3>

<p>coming soon</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a id="simple" class="anchor" href="#simple" aria-hidden="true"><span class="octicon octicon-link"></span></a>simple</h3>

<p>Sent only the total sale, is configured to send data in <code>app/config/moip.php</code></p>

<pre><code>$data = ['values' =&gt; ['value' =&gt; $full_price_products] ];
try {
    $moip = Moip::sendMoip($data);
} catch (Exception $e) {
    echo $e-&gt;getMessage();
}
</code></pre>

<h3>
<a id="advanced" class="anchor" href="#advanced" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced</h3>

<p>Fully customize the data sent!</p>

<pre><code>$data = [
    'unique_id' =&gt; 100000001,
    'reason'    =&gt; 'market of Natal 01',
    'receiver'  =&gt; 'integracao@moip.com.br',
    'returnURL' =&gt; 'https://meusite.com.br/cliente/$id/pedido/pedidorealizado',
    'notificationURL' =&gt; 'https://meusite.com.br/nasp',
    'parcel'    =&gt; [
        'min'       =&gt; 2, 
        'max'       =&gt; 12, 
        'rate'      =&gt; 1.5, 
        'transfer'  =&gt; true
    ],
    'values'    =&gt; [
        'value' =&gt; $full_price_products , 
        'adds'  =&gt; $freight, 
        'deduct'=&gt; $coupon
    ],
    'comission' =&gt; [
        'value'           =&gt; 7, 
        'reason'          =&gt; 'Taxa MoIP', 
        'ratePayer'       =&gt; true,
        'percentageValue' =&gt; true,
        'receiver'        =&gt; 'suporte@moip.com.br',
    ],
    'billet' =&gt; [
        'expiration' =&gt; 3,
        'workingDays'=&gt; true,
        'instructions' =&gt; [
            'firstLine' =&gt; 'First line of comment of billet',
            'secondLine'=&gt; 'Second line of comment of billet',
            'lastLine'  =&gt; 'Last line of comment of billet'
        ],
        'urlLogo' =&gt; 'http://seutie.com.br/logo.png'
    ]
    'message' =&gt; [
        'firstLine' =&gt; 'First comment of checkout',
        'secondLine'=&gt; 'Second comment of checkout',
        'lastLine'  =&gt; 'Last comment of checkout'
    ]
];
try {
    $moip = Moip::sendMoip($data);
} catch (Exception $e) {
    echo $e-&gt;getMessage();
}
</code></pre>

<h2>
<a id="sending-parameters" class="anchor" href="#sending-parameters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sending parameters</h2>

<h4>
<a id="values" class="anchor" href="#values" aria-hidden="true"><span class="octicon octicon-link"></span></a>values</h4>

<hr>

<h5>
<a id="full_price_products-number-freight-number-coupon-number" class="anchor" href="#full_price_products-number-freight-number-coupon-number" aria-hidden="true"><span class="octicon octicon-link"></span></a>$full_price_products: Number, $freight: Number, $coupon: Number</h5>

<ol>
<li>$full_price_products: Responsible for setting the value that should be paid.</li>
<li>$freigth: Responsible for defining the additional amount to be paid.</li>
<li>$deduct: Responsible for defining the value of discount will be subtracted from the total to be paid.</li>
</ol>

<pre><code>$data['values'] =&gt; [
    'value'     =&gt; $full_price_products,
    'adds'      =&gt; $freigth,
    'dedudct'   =&gt; $deduct
];
</code></pre>

<h4>
<a id="unique_id" class="anchor" href="#unique_id" aria-hidden="true"><span class="octicon octicon-link"></span></a>unique_id</h4>

<hr>

<h5>
<a id="id-string" class="anchor" href="#id-string" aria-hidden="true"><span class="octicon octicon-link"></span></a>$id: String</h5>

<p>Its unique identifier request this same information will be sent to you on our notification of changes in status so that you can identify and treat your application status.</p>

<p><code>$data['unique_id'] = $id;</code></p>

<h4>
<a id="reason" class="anchor" href="#reason" aria-hidden="true"><span class="octicon octicon-link"></span></a>reason</h4>

<hr>

<h5>
<a id="value-string" class="anchor" href="#value-string" aria-hidden="true"><span class="octicon octicon-link"></span></a>$value: String</h5>

<p>Responsible for defining the reason for the payment</p>

<p><code>$data['reason'] =&gt; $value;</code></p>

<h4>
<a id="receiver" class="anchor" href="#receiver" aria-hidden="true"><span class="octicon octicon-link"></span></a>receiver</h4>

<hr>

<h5>
<a id="receiver-string" class="anchor" href="#receiver-string" aria-hidden="true"><span class="octicon octicon-link"></span></a>$receiver String</h5>

<p>Identifies the user who will receive payment in MoIP</p>

<p><code>$data['receiver'] = $receiver;</code></p>

<h4>
<a id="parcel" class="anchor" href="#parcel" aria-hidden="true"><span class="octicon octicon-link"></span></a>parcel</h4>

<hr>

<h5>
<a id="min-number-max-number-rate--number-transfer--boolean" class="anchor" href="#min-number-max-number-rate--number-transfer--boolean" aria-hidden="true"><span class="octicon octicon-link"></span></a>$min: Number, $max: Number, $rate : Number, $transfer : Boolean</h5>

<p>Responsible for the installment which will be available to the paying options.</p>

<ol>
<li>$min : Minimum number of plots available to the paying.</li>
<li>$max : Maximum amount of shares available to the paying.</li>
<li>$rate : Amount of interest a.m per parcel.</li>
<li>$transfer : If <code>true</code> sets the default value of the interest will be paid by the paying MOIP.</li>
</ol>

<pre><code>$data['parcel'] =&gt; [
    'min'       =&gt; 2, 
    'max'       =&gt; 12, 
    'rate'      =&gt; 1.5, 
    'transfer'  =&gt; false
];
</code></pre>

<h4>
<a id="comission" class="anchor" href="#comission" aria-hidden="true"><span class="octicon octicon-link"></span></a>comission</h4>

<hr>

<h5>
<a id="reason-string-receiver-string-value-number-percentagevalue-boolean-ratepayer-boolean" class="anchor" href="#reason-string-receiver-string-value-number-percentagevalue-boolean-ratepayer-boolean" aria-hidden="true"><span class="octicon octicon-link"></span></a>$reason: String, $receiver: String, $value: Number, $percentageValue: Boolean, $ratePayer: Boolean</h5>

<ol>
<li>$reason: Reason / Motif to which the secondary recipient will receive the set value.</li>
<li>$receiver: Login MOIP the User to receive the value.</li>
<li>$value: Value which will be allocated to the secondary receiver.</li>
<li>$percentageValue: If "true" sets that value will be calculated in relation to the percentage of
the total value of the transaction.</li>
<li>$ratepayer: If "true" sets that secondary recipient will pay the MOIP with
value received.</li>
</ol>

<pre><code>$data['comission'] =&gt; [ 
    'value' =&gt; 7, 
    'reason' =&gt; 'Taxa MoIP', 
    'ratePayer' =&gt; true, 
    'percentageValue' =&gt; true, 
    'receiver' =&gt; 'suporte@moip.com.br'
];
</code></pre>

<h4>
<a id="billet" class="anchor" href="#billet" aria-hidden="true"><span class="octicon octicon-link"></span></a>billet</h4>

<hr>

<h5>
<a id="expiration-int-ou-date-workingdays-boolean-instructions-array-urilogo-string" class="anchor" href="#expiration-int-ou-date-workingdays-boolean-instructions-array-urilogo-string" aria-hidden="true"><span class="octicon octicon-link"></span></a>$expiration: Int ou Date, $workingDays: Boolean, $instructions: Array(), $uriLogo: String</h5>

<ol>
<li>$expiration: Date in "YYYY-MM-DD" format or number of days.</li>
<li>$workingDays: If "expiration" is the amount of days you can set to. "true" to that is counted in business days, the default is calendar days.</li>
<li>$instructions: Additional Message to be printed on the ticket, up to three messages.</li>
<li>$urlLogo: URL of your logo maximum dimensions 75px wide by 40px high.</li>
</ol>

<pre><code>$data['billet'] = [
    'billet' =&gt; [
        'expiration' =&gt; 3,
        'workingDays'=&gt; true,
        'instructions' =&gt; [
            'firstLine' =&gt; 'First line of comment of billet'',
            'secondLine'=&gt; 'Second line of comment of billet'',
            'lastLine'  =&gt; 'Last line of comment of billet'
        ],
        'urlLogo' =&gt; 'http://seutie.com.br/logo.png'
    ]
];
</code></pre>

<h4>
<a id="message" class="anchor" href="#message" aria-hidden="true"><span class="octicon octicon-link"></span></a>message</h4>

<hr>

<h5>
<a id="msg-string" class="anchor" href="#msg-string" aria-hidden="true"><span class="octicon octicon-link"></span></a>$msg: String</h5>

<ol>
<li>$msg: Display additional messages at checkout MOIP to your buyer.</li>
</ol>

<pre><code>$data['message'] =&gt; [
    'firstLine' =&gt; 'comment of checkout'',
    'secondLine'=&gt; 'comment of checkout'',
    'lastLine'  =&gt; 'comment of checkout'
];
</code></pre>

<h4>
<a id="returnurl" class="anchor" href="#returnurl" aria-hidden="true"><span class="octicon octicon-link"></span></a>returnURL</h4>

<hr>

<h5>
<a id="url--string" class="anchor" href="#url--string" aria-hidden="true"><span class="octicon octicon-link"></span></a>$url : String</h5>

<ol>
<li>$url: responsible for defining the URL that the buyer will be redirected to finalize a payment through checkout MoIP</li>
</ol>

<pre><code>$dta['returnURL'] =&gt; 'https://meusite.com.br/pedidofinalizado';
</code></pre>

<h4>
<a id="notificationurl" class="anchor" href="#notificationurl" aria-hidden="true"><span class="octicon octicon-link"></span></a>notificationURL</h4>

<hr>

<h5>
<a id="url--string-1" class="anchor" href="#url--string-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>$url : String</h5>

<ol>
<li>$url: responsible for defining the URL to which the MOIP shall notify to the NASP (Notification of Change in Status of Payment) the change of status.</li>
</ol>

<pre><code>$dta['notificationURL'] =&gt; 'https://meusite.com.br/nasp';
</code></pre>

<h3>
<a id="data-response" class="anchor" href="#data-response" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data Response</h3>

<table>
<thead>
<tr>
<th>Method</th>
<th>Response</th>
</tr>
</thead>
<tbody>
<tr>
<td>$moip-&gt;error</td>
<td>false or error message</td>
</tr>
<tr>
<td>$moip-&gt;response</td>
<td>true or false</td>
</tr>
<tr>
<td>$moip-&gt;token</td>
<td>token request</td>
</tr>
<tr>
<td>$moip-&gt;payment_url</td>
<td>payment url</td>
</tr>
<tr>
<td>$moip-&gt;xmlSend</td>
<td>xml sent</td>
</tr>
<tr>
<td>$moip-&gt;xmlGet</td>
<td>xml reponse</td>
</tr>
<tr>
<td>Moip::response()</td>
<td>object equal to all previous methods</td>
</tr>
</tbody>
</table>

<h3>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h3>

<p>The MoIP pakacge is open-sourced software licensed under the <a href="http://opensource.org/licenses/MIT">MIT license</a></p>
        </section>

        <footer>
          Moip is maintained by <a href="https://github.com/SOSTheBlack">SOSTheBlack</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-56323206-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>